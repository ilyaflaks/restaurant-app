{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/ilyaflaks/Desktop/Boot Camps/MIT xPro/back-end-part3/Restauraunt-App/app/pages/login.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { Container, Row, Col, Button, Form, FormGroup, Label, Input } from \"reactstrap\"; //import { login } from \"../components/auth\";\n\nimport AppContext from \"../components/context\";\nimport { signInWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, signInWithPopup, getAuth, signInWithRedirect, getRedirectResult, FacebookAuthProvider } from \"firebase/auth\"; //import firebase from \"firebase/app\";\n////this works for log in with email and pw.Commented out for now\n//import { auth } from \"../components/firebase-config\";\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyDAz2pl8mBmPhWHbOwuuUuKQ37pvC1qmL0\",\n  authDomain: \"restaurant-auth-5a646.firebaseapp.com\",\n  projectId: \"restaurant-auth-5a646\",\n  storageBucket: \"restaurant-auth-5a646.appspot.com\",\n  messagingSenderId: \"17278684987\",\n  appId: \"1:17278684987:web:621f3fa24ca30c798db11e\"\n};\n\nfunction Login(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState({\n    identifier: \"\",\n    password: \"\"\n  }),\n      data = _useState[0],\n      updateData = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var router = useRouter();\n  var appContext = useContext(AppContext);\n\n  var _useState4 = useState(\"\"),\n      loginEmail = _useState4[0],\n      setLoginEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      loginPassword = _useState5[0],\n      setLoginPassword = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      errorMsg = _useState6[0],\n      setErrorMsg = _useState6[1];\n\n  var _useState7 = useState(\"false\"),\n      success = _useState7[0],\n      setSuccess = _useState7[1];\n\n  var _useState8 = useState(true),\n      showForm = _useState8[0],\n      setShowForm = _useState8[1]; // useEffect(() => {\n  //   if (appContext.isAuthenticated) {\n  //     router.push(\"/\"); // redirect if you're already logged in\n  //   }\n  // }, []);\n\n\n  var user = appContext.user,\n      setUser = appContext.setUser,\n      isAuthenticated = appContext.isAuthenticated;\n  var auth = getAuth();\n  onAuthStateChanged(auth, function (currentUser) {\n    console.log(\"something changed in Auth State\");\n    setUser(currentUser);\n  });\n\n  var authenticate = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _user;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return signInWithEmailAndPassword(auth, loginEmail, loginPassword);\n\n            case 3:\n              _user = _context.sent;\n              console.log(\"inside try block, things are good\");\n              console.log(_user);\n              setErrorMsg(\"\");\n              setShowForm(false);\n              _context.next = 15;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"inside catch block, things are bad\");\n              console.log(_context.t0.message);\n              setErrorMsg(_context.t0.message);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function authenticate() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var providerBook = new FacebookAuthProvider();\n\n  var logInWithFacebook = function logInWithFacebook() {\n    signInWithPopup(auth, providerBook).then(function (result) {\n      console.log(\"Inside then block\"); // The signed-in user info.\n\n      var user = result.user;\n      console.log(\"user\");\n      console.log(user); // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n\n      var credential = FacebookAuthProvider.credentialFromResult(result);\n      console.log(\"Icredential\");\n      console.log(credential);\n      var accessToken = credential.accessToken;\n      console.log(\"accessToken\");\n      console.log(accessToken); // ...\n    })[\"catch\"](function (error) {\n      console.log(\"Inside catch block\"); // Handle Errors here.\n\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.customData.email; // The AuthCredential type that was used.\n\n      var credential = FacebookAuthProvider.credentialFromError(error); // ...\n    });\n  }; //  const provider = new GoogleAuthProvider();\n\n\n  var loginWithGoogle = function loginWithGoogle() {\n    //version 3, my fav\n    signInWithPopup(auth, provider).then(function (result) {\n      // response.cookie(\"cookie2\", \"value2\", {\n      //   sameSite: \"none\",\n      //   secure: true,\n      // });\n      console.log(\"Inside then block\"); // This gives you a Google Access Token. You can use it to access the Google API.\n\n      var credential = GoogleAuthProvider.credentialFromResult(result);\n      console.log(\"Icredential\");\n      console.log(credential);\n      var token = credential.accessToken;\n      console.log(\"token\");\n      console.log(token); // The signed-in user info.\n\n      var user = result.user;\n      console.log(\"user\");\n      console.log(user); // ...\n    })[\"catch\"](function (error) {\n      console.log(\"Inside the catch block\"); // Handle Errors here.\n\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.customData.email; // The AuthCredential type that was used.\n\n      var credential = GoogleAuthProvider.credentialFromError(error); // ...\n    }); /////\n    ////version 1 from you toob\n    // firebase\n    //   .auth()\n    //   .signInWithPopup(new firebase.auth.GoogleAuthProvider())\n    //   .then((userCred) => {\n    //     if (userCred) {\n    //       setAuth(true);\n    //       window.localStorage.setItem(\"auth\", \"true\");\n    //     }\n    //   });\n    ////Version 2\n    // signInWithPopup(auth, provider)\n    //   .then((result) => {\n    //     console.error(\"In then block of google auth\");\n    //     // This gives you a Google Access Token. You can use it to access the Google API.\n    //     const credential = GoogleAuthProvider.credentialFromResult(result);\n    //     const token = credential.accessToken;\n    //     // The signed-in user info.\n    //     const user = result.user;\n    //     console.log(\"google user: \", user);\n    //   })\n    //   .catch((error) => {\n    //     // Handle Errors here.\n    //     console.error(\"In catch block of google auth\");\n    //     console.error(error);\n    //   });\n  };\n\n  var logout = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return signOut(auth);\n\n            case 2:\n              setShowForm(true);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function logout() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    sm: \"12\",\n    md: {\n      size: 5,\n      offset: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1470127334\" + \" \" + \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1470127334\" + \" \" + \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    style: {\n      paddingTop: 30,\n      paddingLeft: 30\n    },\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, \"Log In\")), __jsx(\"section\", {\n    className: \"jsx-1470127334\" + \" \" + \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, Object.entries(error).length !== 0 && error.constructor === Object && error.message.map(function (error) {\n    return __jsx(\"div\", {\n      key: error.messages[0].id,\n      style: {\n        marginBottom: 10\n      },\n      className: \"jsx-1470127334\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, __jsx(\"small\", {\n      style: {\n        color: \"red\"\n      },\n      className: \"jsx-1470127334\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }\n    }, error.messages[0].message));\n  }), showForm ? __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, __jsx(\"fieldset\", {\n    disabled: loading,\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }\n  }, __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }, __jsx(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 23\n    }\n  }, \"Email:\"), __jsx(Input // onChange={(event) => onChange(event)}\n  , {\n    onChange: function onChange(event) {\n      setLoginEmail(event.target.value);\n    },\n    name: \"identifier\",\n    style: {\n      height: 50,\n      fontSize: \"1.2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 23\n    }\n  })), __jsx(FormGroup, {\n    style: {\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, __jsx(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 23\n    }\n  }, \"Password:\"), __jsx(Input // onChange={(event) => onChange(event)}\n  , {\n    onChange: function onChange(event) {\n      setLoginPassword(event.target.value);\n    },\n    type: \"password\",\n    name: \"password\",\n    style: {\n      height: 50,\n      fontSize: \"1.2em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 23\n    }\n  })), __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    style: {\n      \"float\": \"right\",\n      width: 120\n    },\n    color: \"primary\",\n    onClick: authenticate // onClick={() => {\n    //   setLoading(true);\n    //   login(data.identifier, data.password)\n    //     .then((res) => {\n    //       setLoading(false);\n    //       console.log(\"In login Button. res.data.user: \");\n    //       console.log(res.data.user);\n    //       // set authed User in global context to update header/app state\n    //       appContext.setUser(res.data.user);\n    //     })\n    //     .catch((error) => {\n    //       console.log(\n    //         \"login fun catch block, something is wrong: \"\n    //       );\n    //       console.log(error);\n    //       //setError(error.response.data);\n    //       setLoading(false);\n    //     });\n    // }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 23\n    }\n  }, \"Submit\"), __jsx(\"button\", {\n    onClick: loginWithGoogle,\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 23\n    }\n  }, \"Login with Google\"), \" \", __jsx(\"button\", {\n    onClick: logInWithFacebook,\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 23\n    }\n  }, \"Login with Facebook\")))) : __jsx(\"div\", {\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }, __jsx(\"h4\", {\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 19\n    }\n  }, \"Thank you for logging in! \"), __jsx(\"h5\", {\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 19\n    }\n  }, \"You are now signed in as \", loginEmail), __jsx(Button // style={{ float: \"right\", width: 120 }}\n  , {\n    color: \"primary\",\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 19\n    }\n  }, \"Log Out\")), errorMsg && __jsx(\"h4\", {\n    className: \"jsx-1470127334\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 28\n    }\n  }, errorMsg))))), __jsx(_JSXStyle, {\n    id: \"1470127334\",\n    __self: this\n  }, \".paper.jsx-1470127334{border:1px solid lightgray;box-shadow:0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12);border-radius:6px;margin-top:90px;}.notification.jsx-1470127334{color:#ab003c;}.header.jsx-1470127334{width:100%;height:120px;background-color:#2196f3;margin-bottom:30px;border-radius-top:6px;}.wrapper.jsx-1470127334{padding:10px 30px 20px 30px !important;}a.jsx-1470127334{color:blue !important;}img.jsx-1470127334{margin:15px 30px 10px 50px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pbHlhZmxha3MvRGVza3RvcC9Cb290IENhbXBzL01JVCB4UHJvL2JhY2stZW5kLXBhcnQzL1Jlc3RhdXJhdW50LUFwcC9hcHAvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNFNTLEFBR3dDLEFBUWIsQUFHSCxBQU80QixBQUdqQixBQUdLLFdBWmQsR0FIZixRQWFBLEVBVDJCLEdBVmEsQUFzQnhDLFlBTkEsVUFMcUIsbUJBQ0csc0JBQ3hCLGlEQVpvQixrQkFDRixnQkFDbEIiLCJmaWxlIjoiL1VzZXJzL2lseWFmbGFrcy9EZXNrdG9wL0Jvb3QgQ2FtcHMvTUlUIHhQcm8vYmFjay1lbmQtcGFydDMvUmVzdGF1cmF1bnQtQXBwL2FwcC9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7XG4gIENvbnRhaW5lcixcbiAgUm93LFxuICBDb2wsXG4gIEJ1dHRvbixcbiAgRm9ybSxcbiAgRm9ybUdyb3VwLFxuICBMYWJlbCxcbiAgSW5wdXQsXG59IGZyb20gXCJyZWFjdHN0cmFwXCI7XG4vL2ltcG9ydCB7IGxvZ2luIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvYXV0aFwiO1xuaW1wb3J0IEFwcENvbnRleHQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY29udGV4dFwiO1xuaW1wb3J0IHtcbiAgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXG4gIG9uQXV0aFN0YXRlQ2hhbmdlZCxcbiAgc2lnbk91dCxcbiAgR29vZ2xlQXV0aFByb3ZpZGVyLFxuICBzaWduSW5XaXRoUG9wdXAsXG4gIGdldEF1dGgsXG4gIHNpZ25JbldpdGhSZWRpcmVjdCxcbiAgZ2V0UmVkaXJlY3RSZXN1bHQsXG4gIEZhY2Vib29rQXV0aFByb3ZpZGVyLFxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuLy9pbXBvcnQgZmlyZWJhc2UgZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuXG4vLy8vdGhpcyB3b3JrcyBmb3IgbG9nIGluIHdpdGggZW1haWwgYW5kIHB3LkNvbW1lbnRlZCBvdXQgZm9yIG5vd1xuLy9pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZmlyZWJhc2UtY29uZmlnXCI7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IFwiQUl6YVN5REF6MnBsOG1CbVBoV0hiT3d1dVV1S1EzN3B2QzFxbUwwXCIsXG4gIGF1dGhEb21haW46IFwicmVzdGF1cmFudC1hdXRoLTVhNjQ2LmZpcmViYXNlYXBwLmNvbVwiLFxuICBwcm9qZWN0SWQ6IFwicmVzdGF1cmFudC1hdXRoLTVhNjQ2XCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IFwicmVzdGF1cmFudC1hdXRoLTVhNjQ2LmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjE3Mjc4Njg0OTg3XCIsXG4gIGFwcElkOiBcIjE6MTcyNzg2ODQ5ODc6d2ViOjYyMWYzZmEyNGNhMzBjNzk4ZGIxMWVcIixcbn07XG5cbmZ1bmN0aW9uIExvZ2luKHByb3BzKSB7XG4gIGNvbnN0IFtkYXRhLCB1cGRhdGVEYXRhXSA9IHVzZVN0YXRlKHsgaWRlbnRpZmllcjogXCJcIiwgcGFzc3dvcmQ6IFwiXCIgfSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBhcHBDb250ZXh0ID0gdXNlQ29udGV4dChBcHBDb250ZXh0KTtcbiAgY29uc3QgW2xvZ2luRW1haWwsIHNldExvZ2luRW1haWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtsb2dpblBhc3N3b3JkLCBzZXRMb2dpblBhc3N3b3JkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZXJyb3JNc2csIHNldEVycm9yTXNnXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc3VjY2Vzcywgc2V0U3VjY2Vzc10gPSB1c2VTdGF0ZShcImZhbHNlXCIpO1xuICBjb25zdCBbc2hvd0Zvcm0sIHNldFNob3dGb3JtXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIC8vIHVzZUVmZmVjdCgoKSA9PiB7XG4gIC8vICAgaWYgKGFwcENvbnRleHQuaXNBdXRoZW50aWNhdGVkKSB7XG4gIC8vICAgICByb3V0ZXIucHVzaChcIi9cIik7IC8vIHJlZGlyZWN0IGlmIHlvdSdyZSBhbHJlYWR5IGxvZ2dlZCBpblxuICAvLyAgIH1cbiAgLy8gfSwgW10pO1xuXG4gIGNvbnN0IHsgdXNlciwgc2V0VXNlciwgaXNBdXRoZW50aWNhdGVkIH0gPSBhcHBDb250ZXh0O1xuICBjb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xuICBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKGN1cnJlbnRVc2VyKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJzb21ldGhpbmcgY2hhbmdlZCBpbiBBdXRoIFN0YXRlXCIpO1xuICAgIHNldFVzZXIoY3VycmVudFVzZXIpO1xuICB9KTtcblxuICBjb25zdCBhdXRoZW50aWNhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChcbiAgICAgICAgYXV0aCxcbiAgICAgICAgbG9naW5FbWFpbCxcbiAgICAgICAgbG9naW5QYXNzd29yZFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHRyeSBibG9jaywgdGhpbmdzIGFyZSBnb29kXCIpO1xuXG4gICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgIHNldEVycm9yTXNnKFwiXCIpO1xuICAgICAgc2V0U2hvd0Zvcm0oZmFsc2UpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImluc2lkZSBjYXRjaCBibG9jaywgdGhpbmdzIGFyZSBiYWRcIik7XG5cbiAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0RXJyb3JNc2coZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHByb3ZpZGVyQm9vayA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xuXG4gIGNvbnN0IGxvZ0luV2l0aEZhY2Vib29rID0gKCkgPT4ge1xuICAgIHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlckJvb2spXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZW4gYmxvY2tcIik7XG4gICAgICAgIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxuICAgICAgICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidXNlclwiKTtcbiAgICAgICAgY29uc29sZS5sb2codXNlcik7XG4gICAgICAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLiBZb3UgY2FuIHVzZSBpdCB0byBhY2Nlc3MgdGhlIEZhY2Vib29rIEFQSS5cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSWNyZWRlbnRpYWxcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWRlbnRpYWwpO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWNjZXNzVG9rZW5cIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGFjY2Vzc1Rva2VuKTtcblxuICAgICAgICAvLyAuLi5cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5zaWRlIGNhdGNoIGJsb2NrXCIpO1xuICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXG4gICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIC8vIFRoZSBlbWFpbCBvZiB0aGUgdXNlcidzIGFjY291bnQgdXNlZC5cbiAgICAgICAgY29uc3QgZW1haWwgPSBlcnJvci5jdXN0b21EYXRhLmVtYWlsO1xuICAgICAgICAvLyBUaGUgQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLlxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcik7XG5cbiAgICAgICAgLy8gLi4uXG4gICAgICB9KTtcbiAgfTtcblxuICAvLyAgY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cbiAgY29uc3QgbG9naW5XaXRoR29vZ2xlID0gKCkgPT4ge1xuICAgIC8vdmVyc2lvbiAzLCBteSBmYXZcblxuICAgIHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcilcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gcmVzcG9uc2UuY29va2llKFwiY29va2llMlwiLCBcInZhbHVlMlwiLCB7XG4gICAgICAgIC8vICAgc2FtZVNpdGU6IFwibm9uZVwiLFxuICAgICAgICAvLyAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZW4gYmxvY2tcIik7XG4gICAgICAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi4gWW91IGNhbiB1c2UgaXQgdG8gYWNjZXNzIHRoZSBHb29nbGUgQVBJLlxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSWNyZWRlbnRpYWxcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWRlbnRpYWwpO1xuICAgICAgICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG4gICAgICAgIGNvbnNvbGUubG9nKFwidG9rZW5cIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2VuKTtcbiAgICAgICAgLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcbiAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgICAgLy8gLi4uXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkluc2lkZSB0aGUgY2F0Y2ggYmxvY2tcIik7XG4gICAgICAgIC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cbiAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgLy8gVGhlIGVtYWlsIG9mIHRoZSB1c2VyJ3MgYWNjb3VudCB1c2VkLlxuICAgICAgICBjb25zdCBlbWFpbCA9IGVycm9yLmN1c3RvbURhdGEuZW1haWw7XG4gICAgICAgIC8vIFRoZSBBdXRoQ3JlZGVudGlhbCB0eXBlIHRoYXQgd2FzIHVzZWQuXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcik7XG4gICAgICAgIC8vIC4uLlxuICAgICAgfSk7XG4gICAgLy8vLy9cbiAgICAvLy8vdmVyc2lvbiAxIGZyb20geW91IHRvb2JcbiAgICAvLyBmaXJlYmFzZVxuICAgIC8vICAgLmF1dGgoKVxuICAgIC8vICAgLnNpZ25JbldpdGhQb3B1cChuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKSlcbiAgICAvLyAgIC50aGVuKCh1c2VyQ3JlZCkgPT4ge1xuICAgIC8vICAgICBpZiAodXNlckNyZWQpIHtcbiAgICAvLyAgICAgICBzZXRBdXRoKHRydWUpO1xuICAgIC8vICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImF1dGhcIiwgXCJ0cnVlXCIpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KTtcbiAgICAvLy8vVmVyc2lvbiAyXG4gICAgLy8gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKVxuICAgIC8vICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIC8vICAgICBjb25zb2xlLmVycm9yKFwiSW4gdGhlbiBibG9jayBvZiBnb29nbGUgYXV0aFwiKTtcbiAgICAvLyAgICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLiBZb3UgY2FuIHVzZSBpdCB0byBhY2Nlc3MgdGhlIEdvb2dsZSBBUEkuXG4gICAgLy8gICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcbiAgICAvLyAgICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuICAgIC8vICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cbiAgICAvLyAgICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcImdvb2dsZSB1c2VyOiBcIiwgdXNlcik7XG4gICAgLy8gICB9KVxuICAgIC8vICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIC8vICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXG4gICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJJbiBjYXRjaCBibG9jayBvZiBnb29nbGUgYXV0aFwiKTtcbiAgICAvLyAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgLy8gICB9KTtcbiAgfTtcblxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgc2lnbk91dChhdXRoKTtcbiAgICBzZXRTaG93Rm9ybSh0cnVlKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxDb250YWluZXI+XG4gICAgICA8Um93PlxuICAgICAgICA8Q29sIHNtPVwiMTJcIiBtZD17eyBzaXplOiA1LCBvZmZzZXQ6IDMgfX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYXBlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPXt7IHBhZGRpbmdUb3A6IDMwLCBwYWRkaW5nTGVmdDogMzAgfX0+TG9nIEluPC9oMj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwid3JhcHBlclwiPlxuICAgICAgICAgICAgICB7T2JqZWN0LmVudHJpZXMoZXJyb3IpLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgICAgIGVycm9yLmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlLm1hcCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Vycm9yLm1lc3NhZ2VzWzBdLmlkfVxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMTAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT17eyBjb2xvcjogXCJyZWRcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtlcnJvci5tZXNzYWdlc1swXS5tZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc21hbGw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAge3Nob3dGb3JtID8gKFxuICAgICAgICAgICAgICAgIDxGb3JtPlxuICAgICAgICAgICAgICAgICAgPGZpZWxkc2V0IGRpc2FibGVkPXtsb2FkaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICA8TGFiZWw+RW1haWw6PC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uQ2hhbmdlPXsoZXZlbnQpID0+IG9uQ2hhbmdlKGV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9naW5FbWFpbChldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJpZGVudGlmaWVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogNTAsIGZvbnRTaXplOiBcIjEuMmVtXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cCBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDMwIH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbD5QYXNzd29yZDo8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25DaGFuZ2U9eyhldmVudCkgPT4gb25DaGFuZ2UoZXZlbnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2dpblBhc3N3b3JkKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IDUwLCBmb250U2l6ZTogXCIxLjJlbVwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsPkZvcmdvdCBQYXNzd29yZD88L3NtYWxsPlxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPiAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmbG9hdDogXCJyaWdodFwiLCB3aWR0aDogMTIwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXV0aGVudGljYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBsb2dpbihkYXRhLmlkZW50aWZpZXIsIGRhdGEucGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBjb25zb2xlLmxvZyhcIkluIGxvZ2luIEJ1dHRvbi4gcmVzLmRhdGEudXNlcjogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEudXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAvLyBzZXQgYXV0aGVkIFVzZXIgaW4gZ2xvYmFsIGNvbnRleHQgdG8gdXBkYXRlIGhlYWRlci9hcHAgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGFwcENvbnRleHQuc2V0VXNlcihyZXMuZGF0YS51c2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBcImxvZ2luIGZ1biBjYXRjaCBibG9jaywgc29tZXRoaW5nIGlzIHdyb25nOiBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIC8vc2V0RXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIHtsb2FkaW5nID8gXCJMb2FkaW5nLi4uIFwiIDogXCJTdWJtaXRcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17bG9naW5XaXRoR29vZ2xlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2luIHdpdGggR29vZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17bG9nSW5XaXRoRmFjZWJvb2t9PlxuICAgICAgICAgICAgICAgICAgICAgICAgTG9naW4gd2l0aCBGYWNlYm9va1xuICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XG4gICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQ+VGhhbmsgeW91IGZvciBsb2dnaW5nIGluISA8L2g0PlxuICAgICAgICAgICAgICAgICAgPGg1PllvdSBhcmUgbm93IHNpZ25lZCBpbiBhcyB7bG9naW5FbWFpbH08L2g1PlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAvLyBzdHlsZT17eyBmbG9hdDogXCJyaWdodFwiLCB3aWR0aDogMTIwIH19XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2xvZ291dH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgTG9nIE91dFxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtlcnJvck1zZyAmJiA8aDQ+e2Vycm9yTXNnfTwvaDQ+fVxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NvbD5cbiAgICAgIDwvUm93PlxuICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAge2BcbiAgICAgICAgICAucGFwZXIge1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgbGlnaHRncmF5O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDFweCAzcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4yKSxcbiAgICAgICAgICAgICAgMHB4IDFweCAxcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNCksXG4gICAgICAgICAgICAgIDBweCAycHggMXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDkwcHg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5ub3RpZmljYXRpb24ge1xuICAgICAgICAgICAgY29sb3I6ICNhYjAwM2M7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5oZWFkZXIge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDEyMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzIxOTZmMztcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzLXRvcDogNnB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAud3JhcHBlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDMwcHggMjBweCAzMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGEge1xuICAgICAgICAgICAgY29sb3I6IGJsdWUgIWltcG9ydGFudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW1nIHtcbiAgICAgICAgICAgIG1hcmdpbjogMTVweCAzMHB4IDEwcHggNTBweDtcbiAgICAgICAgICB9XG4gICAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvQ29udGFpbmVyPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBMb2dpbjtcbiJdfQ== */\\n/*@ sourceURL=/Users/ilyaflaks/Desktop/Boot Camps/MIT xPro/back-end-part3/Restauraunt-App/app/pages/login.js */\"));\n}\n\n_s(Login, \"RKePcPJXrpo3GgFP7fURHQgo7OE=\", false, function () {\n  return [useRouter];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/ilyaflaks/Desktop/Boot Camps/MIT xPro/back-end-part3/Restauraunt-App/app/pages/login.js"],"names":["React","useState","useEffect","useContext","useRouter","Container","Row","Col","Button","Form","FormGroup","Label","Input","AppContext","signInWithEmailAndPassword","onAuthStateChanged","signOut","GoogleAuthProvider","signInWithPopup","getAuth","signInWithRedirect","getRedirectResult","FacebookAuthProvider","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","Login","props","identifier","password","data","updateData","loading","setLoading","error","setError","router","appContext","loginEmail","setLoginEmail","loginPassword","setLoginPassword","errorMsg","setErrorMsg","success","setSuccess","showForm","setShowForm","user","setUser","isAuthenticated","auth","currentUser","console","log","authenticate","message","providerBook","logInWithFacebook","then","result","credential","credentialFromResult","accessToken","errorCode","code","errorMessage","email","customData","credentialFromError","loginWithGoogle","provider","token","logout","size","offset","paddingTop","paddingLeft","Object","entries","length","constructor","map","messages","id","marginBottom","color","event","target","value","height","fontSize","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useRouter } from \"next/router\";\nimport {\n  Container,\n  Row,\n  Col,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n} from \"reactstrap\";\n//import { login } from \"../components/auth\";\nimport AppContext from \"../components/context\";\nimport {\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n  GoogleAuthProvider,\n  signInWithPopup,\n  getAuth,\n  signInWithRedirect,\n  getRedirectResult,\n  FacebookAuthProvider,\n} from \"firebase/auth\";\n//import firebase from \"firebase/app\";\n\n////this works for log in with email and pw.Commented out for now\n//import { auth } from \"../components/firebase-config\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDAz2pl8mBmPhWHbOwuuUuKQ37pvC1qmL0\",\n  authDomain: \"restaurant-auth-5a646.firebaseapp.com\",\n  projectId: \"restaurant-auth-5a646\",\n  storageBucket: \"restaurant-auth-5a646.appspot.com\",\n  messagingSenderId: \"17278684987\",\n  appId: \"1:17278684987:web:621f3fa24ca30c798db11e\",\n};\n\nfunction Login(props) {\n  const [data, updateData] = useState({ identifier: \"\", password: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const router = useRouter();\n  const appContext = useContext(AppContext);\n  const [loginEmail, setLoginEmail] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [success, setSuccess] = useState(\"false\");\n  const [showForm, setShowForm] = useState(true);\n\n  // useEffect(() => {\n  //   if (appContext.isAuthenticated) {\n  //     router.push(\"/\"); // redirect if you're already logged in\n  //   }\n  // }, []);\n\n  const { user, setUser, isAuthenticated } = appContext;\n  const auth = getAuth();\n  onAuthStateChanged(auth, (currentUser) => {\n    console.log(\"something changed in Auth State\");\n    setUser(currentUser);\n  });\n\n  const authenticate = async () => {\n    try {\n      const user = await signInWithEmailAndPassword(\n        auth,\n        loginEmail,\n        loginPassword\n      );\n      console.log(\"inside try block, things are good\");\n\n      console.log(user);\n      setErrorMsg(\"\");\n      setShowForm(false);\n    } catch (error) {\n      console.log(\"inside catch block, things are bad\");\n\n      console.log(error.message);\n      setErrorMsg(error.message);\n    }\n  };\n\n  const providerBook = new FacebookAuthProvider();\n\n  const logInWithFacebook = () => {\n    signInWithPopup(auth, providerBook)\n      .then((result) => {\n        console.log(\"Inside then block\");\n        // The signed-in user info.\n        const user = result.user;\n        console.log(\"user\");\n        console.log(user);\n        // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n        const credential = FacebookAuthProvider.credentialFromResult(result);\n        console.log(\"Icredential\");\n        console.log(credential);\n        const accessToken = credential.accessToken;\n        console.log(\"accessToken\");\n        console.log(accessToken);\n\n        // ...\n      })\n      .catch((error) => {\n        console.log(\"Inside catch block\");\n        // Handle Errors here.\n        const errorCode = error.code;\n        const errorMessage = error.message;\n        // The email of the user's account used.\n        const email = error.customData.email;\n        // The AuthCredential type that was used.\n        const credential = FacebookAuthProvider.credentialFromError(error);\n\n        // ...\n      });\n  };\n\n  //  const provider = new GoogleAuthProvider();\n\n  const loginWithGoogle = () => {\n    //version 3, my fav\n\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        // response.cookie(\"cookie2\", \"value2\", {\n        //   sameSite: \"none\",\n        //   secure: true,\n        // });\n        console.log(\"Inside then block\");\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        const credential = GoogleAuthProvider.credentialFromResult(result);\n        console.log(\"Icredential\");\n        console.log(credential);\n        const token = credential.accessToken;\n        console.log(\"token\");\n        console.log(token);\n        // The signed-in user info.\n        const user = result.user;\n        console.log(\"user\");\n        console.log(user);\n        // ...\n      })\n      .catch((error) => {\n        console.log(\"Inside the catch block\");\n        // Handle Errors here.\n        const errorCode = error.code;\n        const errorMessage = error.message;\n        // The email of the user's account used.\n        const email = error.customData.email;\n        // The AuthCredential type that was used.\n        const credential = GoogleAuthProvider.credentialFromError(error);\n        // ...\n      });\n    /////\n    ////version 1 from you toob\n    // firebase\n    //   .auth()\n    //   .signInWithPopup(new firebase.auth.GoogleAuthProvider())\n    //   .then((userCred) => {\n    //     if (userCred) {\n    //       setAuth(true);\n    //       window.localStorage.setItem(\"auth\", \"true\");\n    //     }\n    //   });\n    ////Version 2\n    // signInWithPopup(auth, provider)\n    //   .then((result) => {\n    //     console.error(\"In then block of google auth\");\n    //     // This gives you a Google Access Token. You can use it to access the Google API.\n    //     const credential = GoogleAuthProvider.credentialFromResult(result);\n    //     const token = credential.accessToken;\n    //     // The signed-in user info.\n    //     const user = result.user;\n    //     console.log(\"google user: \", user);\n    //   })\n    //   .catch((error) => {\n    //     // Handle Errors here.\n    //     console.error(\"In catch block of google auth\");\n    //     console.error(error);\n    //   });\n  };\n\n  const logout = async () => {\n    await signOut(auth);\n    setShowForm(true);\n  };\n\n  return (\n    <Container>\n      <Row>\n        <Col sm=\"12\" md={{ size: 5, offset: 3 }}>\n          <div className=\"paper\">\n            <div className=\"header\">\n              <h2 style={{ paddingTop: 30, paddingLeft: 30 }}>Log In</h2>\n            </div>\n            <section className=\"wrapper\">\n              {Object.entries(error).length !== 0 &&\n                error.constructor === Object &&\n                error.message.map((error) => {\n                  return (\n                    <div\n                      key={error.messages[0].id}\n                      style={{ marginBottom: 10 }}\n                    >\n                      <small style={{ color: \"red\" }}>\n                        {error.messages[0].message}\n                      </small>\n                    </div>\n                  );\n                })}\n              {showForm ? (\n                <Form>\n                  <fieldset disabled={loading}>\n                    <FormGroup>\n                      <Label>Email:</Label>\n                      <Input\n                        // onChange={(event) => onChange(event)}\n                        onChange={(event) => {\n                          setLoginEmail(event.target.value);\n                        }}\n                        name=\"identifier\"\n                        style={{ height: 50, fontSize: \"1.2em\" }}\n                      />\n                    </FormGroup>\n                    <FormGroup style={{ marginBottom: 30 }}>\n                      <Label>Password:</Label>\n                      <Input\n                        // onChange={(event) => onChange(event)}\n                        onChange={(event) => {\n                          setLoginPassword(event.target.value);\n                        }}\n                        type=\"password\"\n                        name=\"password\"\n                        style={{ height: 50, fontSize: \"1.2em\" }}\n                      />\n                    </FormGroup>\n\n                    <FormGroup>\n                      {/* <span>\n                      <a href=\"\">\n                        <small>Forgot Password?</small>\n                      </a>\n                    </span> */}\n                      <Button\n                        style={{ float: \"right\", width: 120 }}\n                        color=\"primary\"\n                        onClick={authenticate}\n                        // onClick={() => {\n                        //   setLoading(true);\n                        //   login(data.identifier, data.password)\n                        //     .then((res) => {\n                        //       setLoading(false);\n                        //       console.log(\"In login Button. res.data.user: \");\n                        //       console.log(res.data.user);\n                        //       // set authed User in global context to update header/app state\n                        //       appContext.setUser(res.data.user);\n                        //     })\n                        //     .catch((error) => {\n                        //       console.log(\n                        //         \"login fun catch block, something is wrong: \"\n                        //       );\n                        //       console.log(error);\n                        //       //setError(error.response.data);\n                        //       setLoading(false);\n                        //     });\n                        // }}\n                      >\n                        {/* {loading ? \"Loading... \" : \"Submit\"}\n                         */}\n                        Submit\n                      </Button>\n                      <button onClick={loginWithGoogle}>\n                        Login with Google\n                      </button>{\" \"}\n                      <button onClick={logInWithFacebook}>\n                        Login with Facebook\n                      </button>\n                    </FormGroup>\n                  </fieldset>\n                </Form>\n              ) : (\n                <div>\n                  <h4>Thank you for logging in! </h4>\n                  <h5>You are now signed in as {loginEmail}</h5>\n                  <Button\n                    // style={{ float: \"right\", width: 120 }}\n                    color=\"primary\"\n                    onClick={logout}\n                  >\n                    Log Out\n                  </Button>\n                </div>\n              )}\n              {errorMsg && <h4>{errorMsg}</h4>}\n            </section>\n          </div>\n        </Col>\n      </Row>\n      <style jsx>\n        {`\n          .paper {\n            border: 1px solid lightgray;\n            box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\n              0px 1px 1px 0px rgba(0, 0, 0, 0.14),\n              0px 2px 1px -1px rgba(0, 0, 0, 0.12);\n            border-radius: 6px;\n            margin-top: 90px;\n          }\n          .notification {\n            color: #ab003c;\n          }\n          .header {\n            width: 100%;\n            height: 120px;\n            background-color: #2196f3;\n            margin-bottom: 30px;\n            border-radius-top: 6px;\n          }\n          .wrapper {\n            padding: 10px 30px 20px 30px !important;\n          }\n          a {\n            color: blue !important;\n          }\n          img {\n            margin: 15px 30px 10px 50px;\n          }\n        `}\n      </style>\n    </Container>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}